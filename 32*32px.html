<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Codejam Canvas</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="menu-logo">
            
                <a href="#" class="menu--strips">
                    <img src="images/menu-strips.png">
                </a>
                <p>CodeJam - Pallete</p>
            </div>
            
            <div class="menu-dots">
                <img src="images/menu dots.png">
            </div>
        </div>
        <main>
            <div class="panel">
                <div class="panel__instr">
                    <div class="panel__instr_top">
                        <div id="grid">
                        <div><img src="images/icon-share-1.png"></div>
                        <div><p>Paint bucket</p></div>
                        <div><img src="images/icon-upload.png"></div>
                        <div><p>Choose color</p></div>

                        <div><img src="images/arrows-alt.png"></div>
                        <div><p>Move</p></div>
                        <div><img src="images/icon-share.png"></div>
                        <div><p>Transform</p></div>
                        </div>
                    </div>
                    
                </div>
                <div class="panel__color">
                    <div class="panel__color_top">
                    <div id="grid">
                        <div><img src="images/Ellipse-1.png"></div>
                        <div><p>Current color</p></div>
                        <div><img src="images/Ellipse-1.png"></div>
                        <div><p>Prev color</p></div>

                        <div><img src="images/Ellipse red.png"></div>
                        <div><p>red</p></div>
                        <div><img src="images/blue.png"></div>
                        <div><p>blue</p></div>
                        </div>
                    </div>
                </div>
            </div>
                <canvas id="canvas" height="32px" width="32px" ></canvas>
                <script>                    
                    fetch("https://raw.githubusercontent.com/rolling-scopes-school/tasks/master/tasks/stage-2/codejam-canvas/data/32x32.json")
                    .then(response => response.json())
                    .then(json => {
                        let canvas = document.getElementById('canvas');
                        ctx = canvas.getContext('2d');
                        let x = 0;
                        let y = 0;
                        pic = json;
                        for (let i = 0; i < pic.length; i++) {
                            for (let j = 0; j < pic.length; j++) {                                
                                pic[i][j][3] = pic[i][j][3]*100/255;                    
                                ctx.fillStyle = 'rgba' + '(' + pic[i][j].join() + ')';
                                ctx.fillRect(x, y, 1, 1);
                                x++;
                            }
                            x = 0;
                            y += 1;
                        }
                    });
                </script>
        </main>   
        </div>
</body>

</html>